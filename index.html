<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
      name="viewport"
    />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Onest:wght@400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
      rel="stylesheet"
    />
    <script id="tailwind-config">
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#B8FF00",
              "bg-dark": "#1E1E1E",
              "muted-gray": "#555555",
              "card-dark": "#111111",
              "accent-red": "#FF3B30",
            },
            fontFamily: {
              sans: ["Onest", "sans-serif"],
            },
            borderRadius: {
              "2xl": "1rem",
            },
          },
        },
      };
    </script>
        <link rel="stylesheet" href="styles.css" />

  </head>
  <body class="flex flex-col p-6">
    <section id="screen-locked" class="screen">
      <div class="h-full flex flex-col items-center justify-center text-center">
        <div class="text-2xl font-bold mb-2">Доступ закрыт</div>
        <div class="text-muted-gray">Вход только по приглашению.</div>
      </div>
    </section>
    <header id="appHeader" class="pt-2 mb-6 flex items-center gap-3">
      <img
        src="ghost_ava.png"
        alt="GhostLink"
        class="w-10 h-10 rounded-full object-cover"
      />
      <div class="flex-1">
        <h1 class="text-3xl font-black tracking-tight text-white uppercase">
          GHOSTLINK
        </h1>
      </div>
      <button id="backBtn" class="hidden text-white/80">Назад</button>
    </header>

    <main class="flex-1 overflow-y-auto">
      <section id="screen-home" class="screen active">
        <div class="mt-2 grid grid-cols-2 gap-x-6 gap-y-1 mb-8 items-start">
          <span class="text-white text-[28px] font-bold leading-none" id="balanceValue">0₽</span>
          <span class="text-white text-lg font-bold leading-none text-right" id="expiryValue">нет подписки</span>
          <div class="min-h-[16px] flex items-end">
            <span class="text-muted-gray text-[20px] font-black uppercase tracking-wider">Баланс</span>
          </div>
          <div class="min-h-[16px] flex items-end justify-end">
            <span id="subStatus" class="text-[10px] font-black uppercase tracking-wider text-accent-red"
              >ПОДПИСКА НЕАКТИВНА</span
            >
          </div>
        </div>

        <div class="flex flex-col gap-4">
          <button id="buyBtn"
            class="ios-active w-full bg-primary h-[60px] rounded-2xl flex items-center justify-between px-6"
          >
            <span class="text-black font-bold text-lg">Поддержать проект</span>
            <span class="material-symbols-outlined text-black">favorite</span>
          </button>
        </div>

        <div class="grid grid-cols-2 gap-4 mt-4">
          <button id="profileBtn"
            class="ios-active border border-primary h-[80px] rounded-2xl flex flex-col items-center justify-center gap-1"
          >
            <span class="material-symbols-outlined text-primary">person</span>
            <span class="text-primary text-sm font-bold">Профиль</span>
          </button>
          <button id="supportBtn"
            class="ios-active border border-primary h-[80px] rounded-2xl flex flex-col items-center justify-center gap-1"
          >
            <span class="material-symbols-outlined text-primary">headset_mic</span>
            <span class="text-primary text-sm font-bold">Поддержка</span>
          </button>
        </div>
        <button id="homeAdminBtn"
          class="hidden ios-active mt-4 w-full border border-primary h-[52px] rounded-2xl flex items-center justify-center gap-2"
        >
          <span class="material-symbols-outlined text-primary">admin_panel_settings</span>
          <span class="text-primary font-bold">Админка</span>
        </button>
      </section>

      <section id="screen-tariffs" class="screen">
        <h2 class="text-2xl font-bold mb-4">Поддержка сервиса</h2>
        <div class="border border-primary rounded-2xl p-4 mb-4">
          <div class="text-white text-lg font-bold">Solo Ghost</div>
          <div class="text-muted-gray text-sm">1 устройство</div>
          <div class="mt-3">
            <button id="soloPay" class="ios-active bg-primary text-black font-bold px-4 py-2 rounded-xl w-full">1 месяц — 150 ₽</button>
          </div>
        </div>

        <div class="border border-primary rounded-2xl p-4">
          <div class="text-white text-lg font-bold">Flex Squad</div>
          <div class="text-muted-gray text-sm">Выбери количество устройств</div>
          <div class="mt-3">
            <input id="flexSlider" type="range" min="2" max="5" value="2" class="w-full">
            <div class="flex justify-between text-xs text-muted-gray mt-1">
              <span>2</span><span>3</span><span>4</span><span>5</span>
            </div>
          </div>
          <div class="mt-3 text-white" id="flexPrice">2 устройства — 225 ₽</div>
          <button id="flexPay" class="ios-active bg-primary text-black font-bold px-4 py-2 rounded-xl w-full mt-3">Поддержать</button>
        </div>

        <div class="text-muted-gray text-sm mt-4">Оплата будет подключена позже.</div>
      </section>

      <section id="screen-profile" class="screen">
        <div class="mb-4">
          <div class="text-2xl font-bold" id="profileName">Пользователь</div>
          <div class="text-muted-gray" id="profileId">ID: 0</div>
        </div>
        <div class="mb-4 text-muted-gray">
          Текущая скидка: <span id="discountValue">0 ₽</span>
        </div>
        <div class="flex flex-col gap-3">
          <button id="profilePayBtn" class="ios-active border border-primary text-primary font-bold px-4 py-3 rounded-2xl">Поддержать сервис</button>
          <button id="profileRefBtn" class="ios-active border border-primary text-primary font-bold px-4 py-3 rounded-2xl">Реферальная программа</button>
          <button id="profileSupportBtn" class="ios-active border border-primary text-primary font-bold px-4 py-3 rounded-2xl">Связаться с поддержкой</button>
          <button id="profileRulesBtn" class="ios-active border border-primary text-primary font-bold px-4 py-3 rounded-2xl">Политика и правила</button>
          <button id="profileDevicesBtn" class="ios-active bg-primary text-black font-bold px-4 py-3 rounded-2xl">Управление устройствами</button>
        </div>
      </section>

      <section id="screen-support" class="screen">
        <h2 class="text-2xl font-bold mb-2">Поддержка</h2>
        <div class="text-muted-gray mb-4">Откроется чат с ботом.</div>
        <a id="supportLink" class="ios-active bg-primary text-black font-bold px-4 py-3 rounded-2xl inline-block" href="#" target="_blank">Открыть чат</a>
      </section>

      <section id="screen-rules" class="screen">
        <h2 class="text-2xl font-bold mb-2">Политика и конфиденциальность</h2>
        <div class="text-muted-gray text-sm leading-6">
          <div class="text-white font-bold mb-1">1. Общие условия</div>
          GhostLink — закрытый сервис доступа к сети по приглашению. Используя сервис, пользователь подтверждает согласие с условиями работы сервиса и правилами клуба.
          <br><br>
          <div class="text-white font-bold mb-1">2. Обрабатываемые данные</div>
          Мы обрабатываем только минимально необходимые данные: Telegram ID, имя/username, статус подписки, технические параметры подключения и обращения в поддержку.
          <br><br>
          <div class="text-white font-bold mb-1">3. Цели обработки</div>
          Данные используются для предоставления доступа, защиты инфраструктуры, диагностики проблем и учета условий подписки. Данные не передаются третьим лицам без законных оснований.
          <br><br>
          <div class="text-white font-bold mb-1">4. Безопасность</div>
          Доступ к служебным интерфейсам ограничивается техническими мерами. Пользователь обязан сохранять конфиденциальность выданных ключей и ссылок доступа.
          <br><br>
          <div class="text-white font-bold mb-1">5. Устав клуба GhostLink</div>
          Клуб работает по модели «свои для своих», с ограниченным числом мест. Запрещены злоупотребления каналом и действия, мешающие работе других участников. Приглашая друга, участник принимает ответственность за его поведение.
        </div>
      </section>

      <section id="screen-devices" class="screen">
        <h2 class="text-2xl font-bold mb-2">Устройства</h2>
        <div class="text-muted-gray mb-1">Лимит устройств: <span id="deviceLimit">0</span></div>
        <div class="text-muted-gray mb-3">Подключено: <span id="deviceCount">0</span></div>
        <div id="deviceList" class="mb-3 text-muted-gray text-sm">Загрузка...</div>
        <div class="flex flex-col gap-3">
          <button id="addDeviceBtn" class="ios-active border border-primary text-primary font-bold px-4 py-3 rounded-2xl">Добавить устройство</button>
          <button id="resetDeviceBtn" class="ios-active border border-primary text-primary font-bold px-4 py-3 rounded-2xl">Сбросить ключ</button>
          <div class="text-muted-gray text-sm">Можно удалить конкретное устройство из списка или полностью сбросить ключ.</div>
        </div>
      </section>

      <section id="screen-ref" class="screen">
        <h2 class="text-2xl font-bold mb-2">Реферальная программа</h2>
        <div class="text-muted-gray mb-3">Пригласи друга — вход только по инвайтам.</div>
        <div class="bg-card-dark rounded-2xl p-4 break-words" id="refLink">ссылка...</div>
        <button id="copyRefBtn" class="ios-active bg-primary text-black font-bold px-4 py-3 rounded-2xl mt-4">Скопировать ссылку</button>
        <div class="text-muted-gray text-sm mt-3">
          Бонус начисляется только после первой оплаты друга: 15% к твоей скидке.
        </div>
        <div class="mt-4" id="refList"></div>
      </section>

      <section id="screen-admin" class="screen">
        <h2 class="text-2xl font-bold mb-4">Админка</h2>
        <div class="text-muted-gray text-sm mb-4">Управление панелью и клиентами в одном месте.</div>

        <div class="border border-primary rounded-2xl p-4 mb-4">
          <div class="text-white font-bold mb-2">Сервер</div>
          <div class="flex gap-2">
            <button id="adminStats" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl w-full">Статистика</button>
            <button id="adminOnline" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl w-full">Онлайн</button>
          </div>
          <div class="mt-2 text-muted-gray text-sm" id="adminStatsBox">ОЗУ: — | Онлайн: —</div>
          <div class="mt-2 text-sm text-muted-gray max-h-32 overflow-y-auto" id="adminOnlineList">Список онлайн появится здесь</div>
          <button id="adminRestart" class="ios-active bg-primary text-black font-bold px-3 py-2 rounded-xl w-full mt-3">Рестарт Xray</button>
        </div>

        <div class="border border-primary rounded-2xl p-4 mb-4">
          <div class="text-white font-bold mb-2">Панель</div>
          <div class="flex gap-2">
            <button id="adminLock" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl w-full">Запереть</button>
            <button id="adminUnlock" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl w-full">Открыть</button>
          </div>
          <div class="mt-3 flex gap-2">
            <input id="adminIp" class="w-full rounded-xl bg-card-dark border border-primary text-white px-3 py-2" placeholder="IP (например 1.2.3.4)" />
            <button id="adminIpShow" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl">IP</button>
          </div>
        </div>

        <div class="border border-primary rounded-2xl p-4 mb-4">
          <div class="text-white font-bold mb-2">Пользователи</div>
          <select id="adminUserId" class="w-full rounded-xl bg-card-dark border border-primary text-white px-3 py-2">
            <option value="">Выбери пользователя</option>
          </select>
          <input id="adminDays" class="w-full rounded-xl bg-card-dark border border-primary text-white px-3 py-2 mt-2" type="number" min="1" value="30" placeholder="Дней для продления" />
          <div class="flex gap-2 mt-3">
            <button id="adminBan" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl w-full">Бан</button>
            <button id="adminUnban" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl w-full">Разбан</button>
            <button id="adminDelete" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl w-full">Удалить</button>
          </div>
          <div class="flex gap-2 mt-2">
            <button id="adminTrial7" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl w-full">Trial 7д</button>
            <button id="adminExtend" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl w-full">Продлить</button>
          </div>
          <div class="flex gap-2 mt-2">
            <button id="adminUnlimited" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl w-full">Без срока</button>
            <button id="adminResetSub" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl w-full">Сброс подписки</button>
          </div>
          <button id="adminUsersRefresh" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl w-full mt-3">Обновить список пользователей</button>
          <button id="adminAddSlots" class="ios-active bg-primary text-black font-bold px-3 py-2 rounded-xl w-full mt-3">+5 мест</button>
        </div>

        <div class="border border-primary rounded-2xl p-4 mb-4">
          <div class="text-white font-bold mb-2">Клиенты (как в панели)</div>
          <button id="adminClientsRefresh" class="ios-active border border-primary text-primary font-bold px-3 py-2 rounded-xl w-full">Обновить список</button>
          <div class="mt-3 grid grid-cols-2 gap-2">
            <input id="adminClientEmail" class="rounded-xl bg-card-dark border border-primary text-white px-3 py-2 col-span-2" placeholder="Название/Email клиента" />
            <input id="adminClientTgId" class="rounded-xl bg-card-dark border border-primary text-white px-3 py-2" placeholder="tg_id (опц.)" />
            <input id="adminClientLimit" class="rounded-xl bg-card-dark border border-primary text-white px-3 py-2" type="number" min="1" max="50" value="3" />
          </div>
          <button id="adminClientCreate" class="ios-active bg-primary text-black font-bold px-3 py-2 rounded-xl w-full mt-3">Добавить клиента вручную</button>
          <div id="adminClients" class="mt-3 text-sm text-muted-gray">Список пуст</div>
        </div>

        <button id="adminBackup" class="ios-active bg-primary text-black font-bold px-3 py-2 rounded-xl w-full">Бэкап</button>
      </section>
    </main>

        <script src="app.js"></script>

  </body>
</html>
